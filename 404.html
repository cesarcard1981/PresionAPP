<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Redireccionando...</title>
    <script>
        // GitHub Pages 404 handler para Firebase Auth redirect
        // Firebase redirige a /__/auth/handler?code=xxx&state=xxx
        // GitHub no encuentra esa ruta y cae aqui.
        // Soluci√≥n: codificar la URL completa y mandarla como parametro a la app.

        const path = window.location.pathname;
        const search = window.location.search;
        const hash = window.location.hash;

        // Guardar TODO en sessionStorage antes de redirigir
        sessionStorage.setItem('gh_redirect_path', path);
        sessionStorage.setItem('gh_redirect_search', search);
        sessionStorage.setItem('gh_redirect_hash', hash);
        sessionStorage.setItem('gh_redirect_full', window.location.href);

        // Redirigir a la app con un flag para que sepa que viene de auth
        const isAuthRedirect = path.includes('/__/auth/') || search.includes('state=') || search.includes('code=');
        
        if (isAuthRedirect) {
            sessionStorage.setItem('firebase_auth_pending', 'true');
        }

        window.location.replace('https://cesarcard1981.github.io/PresionAPP/');
    </script>
    <noscript>
        <meta http-equiv="refresh" content="0;url=https://cesarcard1981.github.io/PresionAPP/">
    </noscript>
</head>
<body>
    <p style="font-family:sans-serif;text-align:center;margin-top:3rem;color:#64748b;">
        Redireccionando...
    </p>
</body>
</html>